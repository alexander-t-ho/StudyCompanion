[build]
builder = "NIXPACKS"
# Let Nixpacks auto-detect and handle bundle install

[deploy]
startCommand = "cd backend && bundle exec puma -C config/puma.rb"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
releaseCommand = "cd backend && (bundle exec rails db:create 2>/dev/null || true) && (bundle exec rails db:migrate || true) && (bundle exec rails db:seed RAILS_ENV=production 2>/dev/null || true)"

