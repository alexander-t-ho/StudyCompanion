# Nixpacks configuration for Rails app in backend subdirectory
# Let Nixpacks auto-detect Ruby version from Gemfile

[phases.install]
cmds = ["cd backend && bundle install --deployment --without development test"]

# Build phase - explicitly do NOT run migrations here
# Migrations will run in the release phase via Procfile or releaseCommand
[phases.build]
cmds = []

[start]
cmd = "cd backend && bundle exec puma -C config/puma.rb"

